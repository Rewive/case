<html>
<header>
    <title>Case</title>
    <link rel="stylesheet" type="text/css" href="style.css" />
    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no, user-scalable=no, viewport-fit=cover">
    <script src="https://unpkg.com/@vkontakte/vk-bridge/dist/browser.min.js"></script>
    <script>vkBridge.send('VKWebAppInit');
    </script>
</header>

<body>
    <div class="zs">
        <div class="info-box">
            <div class="ball">
                <div class="money">
                    <div class="blocka">
                        <p class="case-opn noselect" id="cl_case">Доступно кейсов: 0</p>
                    </div>
                    <div class="blockb">
                        <img src="money.png" class="money-img noselect">
                        <p class="ballans noselect" id="money">100$</p>
                    </div>
                    <div class="blockc">
                        <p class="case-ob noselect" id="case_ob">Открыто: 0</p>
                    </div>
                </div>
            </div>
        </div>
        <div id="error" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <span class="close noselect" onclick="close()">&times;</span>
                    <h2 class="noselect" id="s2"></h2>
                </div>
                <div class="modal-footer noselect">
                    <h3 id="s3"></h3>
                </div>
            </div>
        </div>
        <div class="tbww" id="table">
            <h3 class="b3">Статистика выпадаемых предметов:</h3>
            <table class="b2s">
                <tr>
                    <th>Предмет</th>
                    <th>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th>
                    <th>Кол-во выпадений</th>
                </tr>
                <tr>
                    <th>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th>
                    <th>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th>
                    <th>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th>
                </tr>
                <tr>
                    <th>Мусор</th>
                    <th>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th>
                    <th id="t-1">0</th>
                </tr>
                <tr>
                    <th>Обычный</th>
                    <th>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th>
                    <th id="t-2">0</th>
                </tr>
                <tr>
                    <th>Необычный</th>
                    <th>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th>
                    <th id="t-3">0</th>
                </tr>
                <tr>
                    <th>Редкий</th>
                    <th>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th>
                    <th id="t-4">0</th>
                </tr>
                <tr>
                    <th>Супер редкий</th>
                    <th>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th>
                    <th id="t-5">0</th>
                </tr>
                <tr>
                    <th>Эпический</th>
                    <th>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th>
                    <th id="t-6">0</th>
                </tr>
                <tr>
                    <th>Легендарный</th>
                    <th>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th>
                    <th id="t-7">0</th>
                </tr>
            </table>
            <h3 class="b3">Статистика открытых кейсов:</h3>
            <table class="b2s">
                <tr>
                    <th>Обычных кейсов</th>
                    <th>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th>
                    <th id="c-1">0</th>
                </tr>
                <tr>
                    <th>Редких кейсов</th>
                    <th>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th>
                    <th id="c-2">0</th>
                </tr>
                <tr>
                    <th>Всего кейсов</th>
                    <th>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th>
                    <th id="c-3">0</th>
                </tr>
            </table>
        </div>
        <div id="shop" class="modals">
            <div class="modals-content">
                <div class="modals-header">
                    <span class="close noselect" onclick="close()">&times;</span>
                    <h2 class="noselect" id="s2">Shop</h2>
                    <h4 class="noselect">Выберите тип кейса который хотите купить</h4>
                </div>
                <div class="modals-footer noselect">
                    <div class="shop-blocka" onclick="preca()">
                        <div class="casea">
                            <a class="casetxt">100$</a>
                        </div>
                    </div>
                    <div class="shop-blockb" onclick="cb()">
                        <div class="caseb">
                            <a class="casetxt">1000$</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="shopa" class="modalba">
            <div class="modalba-content">
                <div class="modalba-header">
                    <span class="close noselect" onclick="close()">&times;</span>
                    <h2 class="noselect" id="s2">Shop</h2>
                </div>
                <div class="modalba-footer noselect">
                    <h4 id="sh3b">Это обычный кейс<br>Его цена 100$ за 1 кейс<br>Вам доступно: 0 кейсов</h4>
                    <h4 id="varn"></h4>
                    <input class="shopin" placeholder="Введи количество" id="payn" oninput="prec()"><a class="shopbtn"
                        onclick="pay()">Купить</a>
                </div>
            </div>
        </div>

        <div id="shopb" class="modalbc">
            <div class="modalbc-content">
                <div class="modalbc-header">
                    <span class="close noselect" onclick="close()">&times;</span>
                    <h2 class="noselect" id="as">Shop</h2>
                </div>
                <div class="modalbc-footer noselect">
                    <h4 id="ac">Это редкий кейс<br>Его цена 1000$ за 1 кейс<br>Вам доступно: 0 кейсов</h4>
                    <h4 id="varnn"></h4>
                    <input class="shopin" placeholder="Введи количество" id="paynn" oninput="ww()"><a class="shopbtn"
                        onclick="pay()">Купить</a>
                </div>
            </div>
        </div>
        <div class="boxprog" id="progbar">
            <p class="lss" id="ls">0%</p>
            <div class="progresbar">
                <div class="lvl" id="lvl"></div>
            </div>
            <p class="lvll noselect" id="lvlc">1 lvl</p>
        </div>
        <div class="menu noselect" id="menu"></div>
        <div class="box" id="case-box">
            <div class="case">
                <a class="case-button noselect" id="case-1">Открой свой первый кейс!</a>
                <a class="case-button-open noselect" onclick="case_open(1)" id="cs_opn_a">Открыть</a>
            </div>
        </div>
        <div class="box-r" id="case-box-r">
            <div class="case-r">
                <a class="case-button-r noselect" id="case-2">Открой свой первый кейс!</a>
                <a class="case-button-open noselect" onclick="case_open(2)" id="cs_opn_b">Открыть</a>
            </div>
        </div>
        <p class="eficensy noselect" id="info">Это кейс класса case-1 и из него тебе может выпасть: <br> 1. Мусор с
            шансом
            90% (+75$)<br> 2. Обычный предмет с шансом 4.5% (+200$) <br> 3. Необычный предмет с шансом 2.5% (+450$) <br>
            4.
            Редкий предмет с
            шансом 1.5% (+750$) <br> 5. Супер редкий предмет с шансом 1% (+1.500$) <br> 6. Эпический предмет с шансом
            0.48%
            (+5.000$) <br> 7.
            Легендарный предмет с шансом 0.02% (+100.000$)</p>
        <p class="eficensy noselect" id="info-2">Это кейс класса case-2 и из него тебе может выпасть: <br> 1. Мусор с
            шансом
            90% (+750$)<br> 2. Обычный предмет с шансом 4.5% (+2.000$) <br> 3. Необычный предмет с шансом 2.5% (+4.500$)
            <br>
            4.
            Редкий предмет с
            шансом 1.5% (+7.500$) <br> 5. Супер редкий предмет с шансом 1% (+15.000$) <br> 6. Эпический предмет с шансом
            0.48%
            (+50.000$) <br> 7.
            Легендарный предмет с шансом 0.02% (+1.000.000$)
        </p>
    </div>

</body>

<footer>
    <div class="footer-box">
        <div class="footer">
            <a class="shop-footer" onclick="buy()">Shop</a>
            <a class="stats-footer" onclick="stat()">Stats</a>
            <a class="upgrade-footer" onclick="upgrade()">Upgrade</a>
            <a class="soon-footer" onclick="menu()">Menu</a>
        </div>
    </div>
</footer>

<script>
    let nw_click = 0; np_click = 0; cl_case = 1; clca = 0; clb = 0; save = 0; precheck = 0; bal = 500; vp = 0; fo = 0; g = ""; valu = 0; all_case = 0; dost = 0; strembal = 0; block = 0; cr_case = 0; cl_case_op = 0; cr_case_op = 0; lvl = 0; lvlc = 1; m_case = 0;
    let co = 0; un = 0; ra = 0; sr = 0; ep = 0; le = 0; cop = 0; unp = 0; rap = 0; srp = 0; epp = 0; lep = 0; sum = 0; no = 0; nop = 0;

    document.getElementById("info").style.display = "none";
    document.getElementById("info-2").style.display = "none";
    document.getElementById("case-box").style.display = "none";
    document.getElementById("case-box-r").style.display = "none";
    document.getElementById("table").style.display = "none";

    check();
    balans();

    function res() {

    }

    function stat() {
        get();
        document.getElementById("menu").style.display = "none";
        document.getElementById("info").style.display = "none";
        document.getElementById("info-2").style.display = "none";
        document.getElementById("case-box").style.display = "none";
        document.getElementById("case-box-r").style.display = "none";
        document.getElementById("progbar").style.display = "none";
        document.getElementById("table").style.display = "flex";
        document.getElementById("t-1").innerText = no;
        document.getElementById("t-2").innerText = co;
        document.getElementById("t-3").innerText = un;
        document.getElementById("t-4").innerText = ra;
        document.getElementById("t-5").innerText = sr;
        document.getElementById("t-6").innerText = ep;
        document.getElementById("t-7").innerText = le;
        document.getElementById("c-1").innerText = cl_case_op;
        document.getElementById("c-2").innerText = cr_case_op;
        document.getElementById("c-3").innerText = all_case;
        nw_click = 0
        np_click = 0
    }


    function progres() {
        document.getElementById("lvlc").innerText = lvlc + ' lvl';
        if (lvlc == 1) {
            lvl = m_case / 0.5 //lvl 1 - 50
            if (lvl >= 100) {
                lvlc++
                document.getElementById("lvlc").innerText = lvlc + ' lvl';
                document.getElementById("lvl").style.width = '0%';
                document.getElementById("ls").innerText = '0%';
                m_case -= 50;
            }
            else {
                document.getElementById("lvl").style.width = lvl + '%';
                document.getElementById("ls").innerText = lvl + "%";
            }
        }
        else if (lvlc == 2) {
            lvl = (m_case / 1).toFixed(1) //lvl 2 - 100
            if (lvl >= 100) {
                lvlc++
                document.getElementById("lvlc").innerText = lvlc + ' lvl';
                document.getElementById("lvl").style.width = '0%';
                document.getElementById("ls").innerText = '0%';
                m_case -= 100;
            }
            else {
                document.getElementById("lvl").style.width = lvl + '%';
                document.getElementById("ls").innerText = lvl + "%";
            }
        }
        else if (lvlc == 3) {
            lvl = (m_case / 2.5).toFixed(1) //lvl 3 - 250
            if (lvl >= 100) {
                lvlc++
                document.getElementById("lvlc").innerText = lvlc + ' lvl';
                document.getElementById("lvl").style.width = '0%';
                document.getElementById("ls").innerText = '0%';
                m_case -= 250;
            }
            else {
                document.getElementById("lvl").style.width = lvl + '%';
                document.getElementById("ls").innerText = lvl + "%";
            }
        }
        else if (lvlc == 4) {
            lvl = (m_case / 5).toFixed(1) //lvl 4 - 500
            if (lvl >= 100) {
                lvlc++
                document.getElementById("lvlc").innerText = lvlc + ' lvl';
                document.getElementById("lvl").style.width = '0%';
                document.getElementById("ls").innerText = '0%';
                m_case -= 500;
            }
            else {
                document.getElementById("lvl").style.width = lvl + '%';
                document.getElementById("ls").innerText = lvl + "%";
            }
        }
        else if (lvlc == 5) {
            lvl = (m_case / 10).toFixed(2) //lvl 5 - 1000
            if (lvl >= 100) {
                lvlc++
                document.getElementById("lvlc").innerText = lvlc + ' lvl';
                document.getElementById("lvl").style.width = '0%';
                document.getElementById("ls").innerText = '0%';
                m_case -= 1000;
            }
            else {
                document.getElementById("lvl").style.width = lvl + '%';
                document.getElementById("ls").innerText = lvl + "%";
            }
        }
        else if (lvlc == 6) {
            lvl = (m_case / 15).toFixed(2) //lvl 6 - 1500
            if (lvl >= 100) {
                lvlc++
                document.getElementById("lvlc").innerText = lvlc + ' lvl';
                document.getElementById("lvl").style.width = '0%';
                document.getElementById("ls").innerText = '0%';
                m_case -= 1500;
            }
            else {
                document.getElementById("lvl").style.width = lvl + '%';
                document.getElementById("ls").innerText = lvl + "%";
            }
        }
        else if (lvlc == 7) {
            lvl = (m_case / 25).toFixed(2) //lvl 7 - 2500
            if (lvl >= 100) {
                lvlc++
                document.getElementById("lvlc").innerText = lvlc + ' lvl';
                document.getElementById("lvl").style.width = '0%';
                document.getElementById("ls").innerText = '0%';
                m_case -= 2500;
            }
            else {
                document.getElementById("lvl").style.width = lvl + '%';
                document.getElementById("ls").innerText = lvl + "%";
            }
        }
        else if (lvlc == 8) {
            lvl = (m_case / 50).toFixed(2) //lvl 8 - 5000
            if (lvl >= 100) {
                lvlc++
                document.getElementById("lvlc").innerText = lvlc + ' lvl';
                document.getElementById("lvl").style.width = '0%';
                document.getElementById("ls").innerText = '0%';
                m_case -= 5000;
            }
            else {
                document.getElementById("lvl").style.width = lvl + '%';
                document.getElementById("ls").innerText = lvl + "%";
            }
        }
        else if (lvlc == 9) {
            lvl = (m_case / 100).toFixed(2) //lvl 9 - 10000
            if (lvl >= 100) {
                lvlc++
                document.getElementById("lvlc").innerText = lvlc + ' lvl';
                document.getElementById("lvl").style.width = '0%';
                document.getElementById("ls").innerText = '0%';
                m_case -= 10000;
            }
            else {
                document.getElementById("lvl").style.width = lvl + '%';
                document.getElementById("ls").innerText = lvl + "%";
            }
        }
        else if (lvlc == 10) {
            lvl = (m_case / 150).toFixed(2) //lvl 10 - 15000
            if (lvl >= 100) {
                document.getElementById("lvlc").innerText = lvlc + ' lvl';
                document.getElementById("lvl").style.width = '100%';
                document.getElementById("ls").innerText = '100%';
            }
            else {
                document.getElementById("lvl").style.width = lvl + '%';
                document.getElementById("ls").innerText = lvl + "%";
            }
        }
        set();
    }

    function menu() {
        document.getElementById("menu").style.display = "flex";
        document.getElementById("progbar").style.display = "flex";
        document.getElementById("table").style.display = "none";
        document.getElementById("case-box").style.display = "none";
        document.getElementById("case-box-r").style.display = "none";
        document.getElementById("case-1").innerText = "Открой кейс :)"
        document.getElementById("case-1").style.backgroundColor = "rgb(181, 181, 181)";
        document.getElementById("case-2").innerText = "Открой кейс :)"
        document.getElementById("case-2").style.backgroundColor = "rgb(181, 181, 181)";
        document.getElementById("info").style.display = "none";
        document.getElementById("info-2").style.display = "none";
        nw_click = 0
        np_click = 0
    }

    function upgrade() {
        document.getElementById("error").style.display = "block"
        document.getElementById("s2").innerText = "Coming soon..."
        document.getElementById("s3").innerText = "Извините, данный раздел в разработке :)"
    }

    function preca() {
        document.getElementById("shopa").style.display = "block";
        document.getElementById("shop").style.display = "none";
        strembal = 100;
        dost = Math.floor(bal / strembal)
        document.getElementById("sh3b").innerText = "Это обычный кейс\nЕго цена 100$ за 1 кейс\nВам доступно: " + dost + " кейсов";
    }

    function cb() {
        document.getElementById("shopb").style.display = "block";
        document.getElementById("shop").style.display = "none";
        document.getElementById("ac").style.color = "white";
        document.getElementById("as").style.color = "white";
        strembal = 1000;
        dost = Math.floor(bal / strembal)
        document.getElementById("ac").innerText = "Это редкий кейс\nЕго цена 1000$ за 1 кейс\nВам доступно: " + dost + " кейсов";
        if (dost == 0) {
            document.getElementById("varnn").innerText = "Вы не можете купить данный кейс!\n На вашем балансе менее 1000$";
            document.getElementById("paynn").style.color = "red";
            document.getElementById("varnn").style.color = "red";
            document.getElementById('paynn').setAttribute("disabled", "disabled");

        }
        else {
            document.getElementById("varnn").innerText = "";
            document.getElementById("paynn").style.color = "#575757";
            document.getElementById("varnn").style.color = "#575757";
            document.getElementById('paynn').removeAttribute("disabled", "disabled");
        }
    }


    //var cs = $("#menu").val();
    //$("#menu").append('<div class="native-case-buy" onclick="buy()">' + '<img src="plus.png" class="buy-img">' + '</div>');
    //$("#menu").remove(".native-case-buy");
    //var cs = $("#menu").val();
    //$("#menu").append('<div class="native-case">' + '<a class="open-native" onclick="csm()">Открыть</a>' + '</div>');


    var span = document.getElementsByClassName("close")[0];
    span.onclick = function () {
        document.getElementById("error").style.display = "none";
    }

    var spat = document.getElementsByClassName("close")[1];
    spat.onclick = function () {
        document.getElementById("shop").style.display = "none";
    }

    var spat = document.getElementsByClassName("close")[2];
    spat.onclick = function () {
        document.getElementById("shopa").style.display = "none";
        document.getElementById("shop").style.display = "block";
    }

    var spat = document.getElementsByClassName("close")[3];
    spat.onclick = function () {
        document.getElementById("shopb").style.display = "none";
        document.getElementById("shop").style.display = "block";
    }

    function check() {
        get();
        if (cl_case > 0 || cr_case > 0) {
            document.getElementById("cs_opn_a").innerText = "Открыть"
            document.getElementById("cs_opn_b").innerText = "Открыть"
        }
        else { }
        $("#menu").empty();
        if ((cl_case + cr_case) >= 4) {
            let i = 0;
            if (cl_case >= 4) {
                while (i < 4) {
                    var cs = $("#menu").val();
                    $("#menu").append('<div class="native-case" id="chon">' + '<a class="open-native noselect" onclick="csm()">Открыть</a>' + '</div>');
                    i++
                }
            }
            else if (cr_case >= 4) {
                while (i < 4) {
                    var cd = $("#menu").val();
                    $("#menu").append('<div class="native-case-r" id="chon">' + '<a class="open-native-r noselect" onclick="csr()">Открыть</a>' + '</div>');
                    i++
                }
            }
            else if (cr_case != 4 && cl_case != 4) {
                let cave = 4 - cr_case;
                let zave = 4 - cl_case;
                while (cave < 4) {
                    var cd = $("#menu").val();
                    $("#menu").append('<div class="native-case-r" id="chon">' + '<a class="open-native-r noselect" onclick="csr()">Открыть</a>' + '</div>');
                    cave++
                }
                while (zave < 4) {
                    var cs = $("#menu").val();
                    $("#menu").append('<div class="native-case" id="chon">' + '<a class="open-native noselect" onclick="csm()">Открыть</a>' + '</div>');
                    zave++
                }
            }
        }
        else if ((cl_case + cr_case) < 4) {
            save = 4 - (cl_case + cr_case);
            let s = 0; p = 0; t = 0;
            $("#menu").empty();
            if (save > 0 && save <= 4) {
                while (p < save) {
                    var cw = $("#menu").val();
                    $("#menu").append('<div class="native-case-buy" id="chtw">' + '</div>');
                    p++
                }
                while (t < cr_case) {
                    var cs = $("#menu").val();
                    $("#menu").append('<div class="native-case" id="chon">' + '<a class="open-native-r noselect" onclick="csr()">Открыть</a>' + '</div>');
                    t++
                }
                while (s < cl_case) {
                    var cs = $("#menu").val();
                    $("#menu").append('<div class="native-case" id="chon">' + '<a class="open-native noselect" onclick="csm()">Открыть</a>' + '</div>');
                    s++
                }
            }
        }
    }




    function rand(min, max) {
        ming = Math.ceil(min);
        maxg = Math.floor(max);
        let rand = Math.floor(Math.random() * (maxg - ming)) + ming;
        return rand;
    }

    function csm() {
        if (nw_click == 0) {
            check();
            document.getElementById("menu").style.display = "none";
            document.getElementById("case-box").style.display = "flex";
            document.getElementById("info").style.display = "flex";
            nw_click = 1
        }
        else {
            document.getElementById("menu").style.display = "flex";
            document.getElementById("case-box").style.display = "none";
            document.getElementById("info").style.display = "none";
            check();
            nw_click = 0
        }
    }

    function csr() {
        if (np_click == 0) {
            check();
            document.getElementById("menu").style.display = "none";
            document.getElementById("case-box-r").style.display = "flex";
            document.getElementById("info-2").style.display = "flex";
            np_click = 1
        }
        else {
            document.getElementById("menu").style.display = "flex";
            document.getElementById("case-box-r").style.display = "none";
            document.getElementById("info-2").style.display = "none";
            check();
            np_click = 0
        }
    }

    function case_open(str) {
        get();
        blu = 0
        if (str == 1) {
            if (cl_case > 0) {
                ef = rand(1, 10000)
                all_case++
                cl_case_op++
                if (ef >= 1 && ef <= 5000) { // антидроп#1 50% +75$
                    status = "none"
                    vp += 75
                }
                else if (ef >= 5001 && ef <= 5250) { // 1 кейс-лут "необычный" 2.5% +200$
                    status = "uncommon"
                    vp += 450
                }
                else if (ef >= 5250 && ef <= 5400) { // 2 кейс-лут "редкий" 1.5% +750$
                    status = "rare"
                    vp += 750
                }
                else if (ef >= 5401 && ef <= 8400) { // антидроп#2 30% +75$
                    status = "none"
                    vp += 75
                }
                else if (ef >= 8401 && ef <= 8500) { // 3 кейс-лут "супер редкий" 1% +1.500$
                    status = "superrare"
                    vp += 1500
                }
                else if (ef >= 8501 && ef <= 8950) { // 4 кейс-лут "обычный" 4.5% +450$
                    status = "common"
                    vp += 200
                }
                else if (ef >= 8951 && ef <= 9950) { // антидроп#3 10% +75$
                    status = "none"
                    vp += 75
                }
                else if (ef >= 9951 && ef <= 9998) { // 5 кейс-лут "эпический" 0.48% +5.000$
                    status = "epic"
                    vp += 5000
                }
                else if (ef >= 9999 && ef <= 10000) { // 6 кейс-лут "легендарный" 0.02% +100.000$
                    status = "legendar"
                    vp += 100000
                }
                ef = ""
                cl_case -= 1;
                m_case += 1;
                set();
                result(status, 1);
                get();
                if (cl_case == 0) {
                    document.getElementById("cs_opn_a").innerText = "Выйти"
                }
            }
            else {
                csm();
            }
        }
        else if (str == 2) {
            if (cr_case > 0) {
                ef = rand(1, 10000)
                all_case++
                cr_case_op++
                blu = 1
                if (ef >= 1 && ef <= 5000) { // антидроп#1 50% +750$
                    status = "none"
                    vp += 750
                }
                else if (ef >= 5001 && ef <= 5250) { // 1 кейс-лут "необычный" 2.5% +2.000$
                    status = "uncommon"
                    vp += 4500
                }
                else if (ef >= 5250 && ef <= 5400) { // 2 кейс-лут "редкий" 1.5% +7.500$
                    status = "rare"
                    vp += 7500
                }
                else if (ef >= 5401 && ef <= 8400) { // антидроп#2 30% +750$
                    status = "none"
                    vp += 750
                }
                else if (ef >= 8401 && ef <= 8500) { // 3 кейс-лут "супер редкий" 1% +15.000$
                    status = "superrare"
                    vp += 15000
                }
                else if (ef >= 8501 && ef <= 8950) { // 4 кейс-лут "обычный" 4.5% +4.500$
                    status = "common"
                    vp += 2000
                }
                else if (ef >= 8951 && ef <= 9950) { // антидроп#3 10% +750$
                    status = "none"
                    vp += 750
                }
                else if (ef >= 9951 && ef <= 9998) { // 5 кейс-лут "эпический" 0.48% +50.000$
                    status = "epic"
                    vp += 50000
                }
                else if (ef >= 9999 && ef <= 10000) { // 6 кейс-лут "легендарный" 0.02% +1.000.000$
                    status = "legendar"
                    vp += 1000000
                }
                ef = ""
                cr_case -= 1
                m_case += 2;
                set();
                result(status, 2)
                get();
                if (cr_case == 0) {
                    document.getElementById("cs_opn_b").innerText = "Выйти"
                }
            }
            else if (cr_case == 0) {
                csr();
            }
        }
    }

    function procents() {
        sum = un + co + ra + sr + ep + le + no;
        unp = (un * 100 / sum).toFixed(2)// 1
        cop = (co * 100 / sum).toFixed(2)// 2
        rap = (ra * 100 / sum).toFixed(2)// 3
        srp = (sr * 100 / sum).toFixed(2)// 4
        epp = (ep * 100 / sum).toFixed(2)// 5
        lep = (le * 100 / sum).toFixed(2)// 6
        nop = (no * 100 / sum).toFixed(2)// 7
    }

    function plus() {
        get();
        bal += vp;
        vp = 0;
        set();
    }

    function result(main_status, band) {
        d = band
        status = main_status
        get();
        if (d == 1) {
            document.getElementById("case-1").style.background = "none";
            if (status == 'uncommon') {
                document.getElementById("case-1").style.backgroundColor = "orange";
                ru_status = "необычный"
                res = "Тебе выпал " + ru_status + " предмет!"
                un += 1
                set();
                plus();
                balans("pl");
                check();
            }
            else if (status == 'common') {
                document.getElementById("case-1").style.backgroundColor = "red";
                ru_status = "обычный"
                res = "Тебе выпал " + ru_status + " предмет!"
                co += 1
                set();

                plus();
                balans("pl");
                check();
            }
            else if (status == 'rare') {
                document.getElementById("case-1").style.backgroundColor = "blue";
                ru_status = "редкий"
                res = "Тебе выпал " + ru_status + " предмет!"
                ra += 1
                set();

                plus();
                balans("pl");
                check();
            }
            else if (status == 'superrare') {
                document.getElementById("case-1").style.backgroundColor = "green";
                ru_status = "супер редкий"
                res = "Тебе выпал " + ru_status + " предмет!"
                sr += 1
                set();

                plus();
                balans("pl");
                check();
            }
            else if (status == 'epic') {
                document.getElementById("case-1").style.backgroundColor = "violet";
                ru_status = "эпический"
                res = "Тебе выпал " + ru_status + " предмет!"
                ep += 1
                set();

                plus();
                balans("pl");
                check();
            }
            else if (status == 'legendar') {
                document.getElementById("case-1").style.background = "linear-gradient(135deg, #ff05d9, #2e5bff, #33ffb8, #3cff6d, #2e5bff, #ff05d9)";
                document.getElementById("case-1").style.backgroundSize = "500% 500%";
                document.getElementById("case-1").style.animation = "legendar 20s ease infinite";
                ru_status = "легендарный"
                res = "Тебе выпал " + ru_status + " предмет!"
                le += 1
                set();

                plus();
                balans("pl");
                check();
            }
            else if (status == 'none') {
                document.getElementById("case-1").style.backgroundColor = "brown";
                ru_status = "мусор"
                res = "К сожелению в кейсе был только " + ru_status + " :("
                no += 1
                set();

                plus();
                balans("pl");
                check();
            }
            document.getElementById("case-1").innerText = res;
        }
        else if (d == 2) {
            document.getElementById("case-2").style.background = "none";
            if (status == 'uncommon') {
                document.getElementById("case-2").style.backgroundColor = "orange";
                ru_status = "необычный"
                res = "Тебе выпал " + ru_status + " предмет!"
                un += 1
                set();

                plus();
                balans("pl");
                check();
            }
            else if (status == 'common') {
                document.getElementById("case-2").style.backgroundColor = "red";
                ru_status = "обычный"
                res = "Тебе выпал " + ru_status + " предмет!"
                co += 1
                set();

                plus();
                balans("pl");
                check();
            }
            else if (status == 'rare') {
                document.getElementById("case-2").style.backgroundColor = "blue";
                ru_status = "редкий"
                res = "Тебе выпал " + ru_status + " предмет!"
                ra += 1
                set();

                plus();
                balans("pl");
                check();
            }
            else if (status == 'superrare') {
                document.getElementById("case-2").style.backgroundColor = "green";
                ru_status = "супер редкий"
                res = "Тебе выпал " + ru_status + " предмет!"
                sr += 1
                set();

                plus();
                balans("pl");
                check();
            }
            else if (status == 'epic') {
                document.getElementById("case-2").style.backgroundColor = "violet";
                ru_status = "эпический"
                res = "Тебе выпал " + ru_status + " предмет!"
                ep += 1
                set();

                plus();
                balans("pl");
                check();
            }
            else if (status == 'legendar') {
                document.getElementById("case-2").style.background = "linear-gradient(135deg, #ff05d9, #2e5bff, #33ffb8, #3cff6d, #2e5bff, #ff05d9)";
                document.getElementById("case-2").style.backgroundSize = "500% 500%";
                document.getElementById("case-2").style.animation = "legendar 20s ease infinite";
                ru_status = "легендарный"
                res = "Тебе выпал " + ru_status + " предмет!"
                le += 1
                set();

                plus();
                balans("pl");
                check();
            }
            else if (status == 'none') {
                document.getElementById("case-2").style.backgroundColor = "brown";
                ru_status = "мусор"
                res = "К сожелению в кейсе был только " + ru_status + " :("
                no += 1
                set();

                plus();
                balans("pl");
                check();
            }
            document.getElementById("case-2").innerText = res;
        }
    }

    function balans(at) {
        get();
        document.getElementById('money').innerText = bal + "$";
        if (bal < 100) {
            document.getElementById('money').style.animation = "low-bal 4s ease infinite";
            if (cl_case == 0 && cr_case == 0) {
                document.getElementById("error").style.display = "block"
                document.getElementById("s2").innerText = "Неудача!"
                document.getElementById("s3").innerText = "К сожелению на вашем счету неосталось ни кейсов, ни денег для дальнейшей игры. Прогресс был сброшен:("
                cl_case = 1;
                cr_case = 0;
                cr_case_op = 0
                cl_case_op = 0
                no = 0
                co = 0
                un = 0
                ra = 0
                sr = 0
                ep = 0
                le = 0
                bal = 500;
                all_case = 0;
                set();
                balans();
                check();
            }
        }
        else if (bal >= 101) {
            if (at == "pl") {
                document.getElementById('money').style.animation = "n-bal 2s";
            }
            else if (at == "m") {
                document.getElementById('money').style.animation = "m-bal 2s";
            }
            else {
                document.getElementById('money').style.animation = "none";
            }
        }
    }

    function buy() {
        get();
        balans();
        document.getElementById("shop").style.display = "block";
    }

    function pay() {                                                    // 1111111
        if (strembal == 100) {
            valu = document.getElementById("payn").value
            let col = valu * strembal
            get();
            if (col <= bal) {
                bal -= col;
                cl_case = cl_case + Number(valu);
                set();
                check();
                document.getElementById("shop").style.display = "none";
                document.getElementById("shopa").style.display = "none";
                document.getElementById("shopb").style.display = "none";
                balans("m");
                document.getElementById("case-1").innerText = "Открой кейс :)"
                document.getElementById("case-1").style.backgroundColor = "rgb(181, 181, 181)";
            }
            else {
                document.getElementById("shop").style.display = "none";
                document.getElementById("error").style.display = "block"
                document.getElementById("s2").innerText = "Ошибка!"
                document.getElementById("s3").innerText = "На вашем счету недостаточно средств :("
                balans();
                check();
                span.onclick = function () {
                    document.getElementById("error").style.display = "none";
                    document.getElementById("shop").style.display = "block";
                }
            }
        }
        else if (strembal == 1000) {
            valu = document.getElementById("paynn").value
            let col = valu * strembal
            get();
            if (col <= bal) {
                bal -= col;
                cr_case = cr_case + Number(valu);
                set();
                check();
                document.getElementById("shop").style.display = "none";
                document.getElementById("shopa").style.display = "none";
                document.getElementById("shopb").style.display = "none";
                balans("m");
                document.getElementById("case-2").innerText = "Открой кейс :)"
                document.getElementById("case-2").style.backgroundColor = "rgb(181, 181, 181)";

            }
        }
    }

    function prec() {
        $("#payn").keyup(function (e) {
            this.value = this.value.replace(/[^0-9]/g, '');
            valu = this.value
            if (valu <= dost) {
                document.getElementById("payn").style.color = "#575757";
                document.getElementById("varn").style.color = "#575757";
                document.getElementById("varn").innerText = "";
            }
            else if (valu > dost) {
                document.getElementById("varn").innerText = "Вы не можете покупать кейсов больше чем " + dost + " кейсов";
                document.getElementById("payn").style.color = "red";
                document.getElementById("varn").style.color = "red";
            }
        });
    }

    function ww() {
        $("#paynn").keyup(function (e) {
            this.value = this.value.replace(/[^0-9]/g, '');
            valu = this.value
            if (valu <= dost) {
                document.getElementById("payn").style.color = "#575757";
                document.getElementById("varn").style.color = "#575757";
                document.getElementById("varn").innerText = "";
            }
            else if (valu > dost) {
                document.getElementById("varn").innerText = "Вы не можете покупать кейсов больше чем " + dost + " кейсов";
                document.getElementById("payn").style.color = "red";
                document.getElementById("varn").style.color = "red";
            }
        });
    }

    function get() {
        fo = Number(localStorage.getItem('fo'));
        document.getElementById("cl_case").innerText = "Доступно кейсов: " + (cl_case + cr_case);
        document.getElementById("case_ob").innerText = "Открыто: " + all_case;
        if (fo == 2) {
            cl_case = Number(localStorage.getItem('case'));
            cr_case = Number(localStorage.getItem('caser'));
            bal = Number(localStorage.getItem('bal'));
            all_case = Number(localStorage.getItem('all'));

            no = Number(localStorage.getItem('no'));
            co = Number(localStorage.getItem('co'));
            un = Number(localStorage.getItem('un'));
            ra = Number(localStorage.getItem('ra'));
            sr = Number(localStorage.getItem('sr'));
            ep = Number(localStorage.getItem('ep'));
            le = Number(localStorage.getItem('le'));
            cl_case_op = Number(localStorage.getItem('cl_case_op'));
            cr_case_op = Number(localStorage.getItem('cr_case_op'));
            m_case = Number(localStorage.getItem('m_case'));
            lvlc = Number(localStorage.getItem('lvlc'));
        }
        else if (fo < 2) {
            fo = 2;
            set();
        }
        progres();
    }

    function set() {
        localStorage.setItem('case', cl_case);
        localStorage.setItem('caser', cr_case);
        localStorage.setItem('bal', bal);
        localStorage.setItem('fo', fo);
        localStorage.setItem('all', all_case);

        localStorage.setItem('no', no);
        localStorage.setItem('co', co);
        localStorage.setItem('un', un);
        localStorage.setItem('ra', ra);
        localStorage.setItem('sr', sr);
        localStorage.setItem('ep', ep);
        localStorage.setItem('le', le);
        localStorage.setItem('cl_case_op', cl_case_op);
        localStorage.setItem('cr_case_op', cr_case_op);
        localStorage.setItem('m_case', m_case);
        localStorage.setItem('lvlc', lvlc);
    }

</script>

</html>